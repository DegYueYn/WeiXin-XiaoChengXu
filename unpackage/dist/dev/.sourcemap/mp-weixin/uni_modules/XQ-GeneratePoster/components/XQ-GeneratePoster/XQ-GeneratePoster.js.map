{"version":3,"sources":["webpack:///C:/Users/DYY/Desktop/小程序/uni_modules/XQ-GeneratePoster/components/XQ-GeneratePoster/XQ-GeneratePoster.vue?91c0","webpack:///C:/Users/DYY/Desktop/小程序/uni_modules/XQ-GeneratePoster/components/XQ-GeneratePoster/XQ-GeneratePoster.vue?48d8","webpack:///C:/Users/DYY/Desktop/小程序/uni_modules/XQ-GeneratePoster/components/XQ-GeneratePoster/XQ-GeneratePoster.vue?f5e6","webpack:///C:/Users/DYY/Desktop/小程序/uni_modules/XQ-GeneratePoster/components/XQ-GeneratePoster/XQ-GeneratePoster.vue?d5b9","uni-app:///uni_modules/XQ-GeneratePoster/components/XQ-GeneratePoster/XQ-GeneratePoster.vue","webpack:///C:/Users/DYY/Desktop/小程序/uni_modules/XQ-GeneratePoster/components/XQ-GeneratePoster/XQ-GeneratePoster.vue?bfce","webpack:///C:/Users/DYY/Desktop/小程序/uni_modules/XQ-GeneratePoster/components/XQ-GeneratePoster/XQ-GeneratePoster.vue?0729"],"names":[],"mappings":"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","file":"uni_modules/XQ-GeneratePoster/components/XQ-GeneratePoster/XQ-GeneratePoster.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./XQ-GeneratePoster.vue?vue&type=template&id=d009cffc&\"\nvar renderjs\nimport script from \"./XQ-GeneratePoster.vue?vue&type=script&lang=js&\"\nexport * from \"./XQ-GeneratePoster.vue?vue&type=script&lang=js&\"\nimport style0 from \"./XQ-GeneratePoster.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/XQ-GeneratePoster/components/XQ-GeneratePoster/XQ-GeneratePoster.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./XQ-GeneratePoster.vue?vue&type=template&id=d009cffc&\"","var components\ntry {\n  components = {\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uModal: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-modal/u-modal\" */ \"@/uni_modules/uview-ui/components/u-modal/u-modal.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.share_qrcode_flag = false\n    }\n\n    _vm.e1 = function($event) {\n      _vm.showSaveImgWin = true\n    }\n\n    _vm.e2 = function($event) {\n      _vm.showSaveImgWin = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./XQ-GeneratePoster.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./XQ-GeneratePoster.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"content\">\n\t\t<u-mask :show=\"share_qrcode_flag\" :zoom=\"false\" :custom-style=\"{ background: 'rgba(0,0,0,.8)' }\" :duration=\"0\">\n\t\t\t<view class=\"sq_box\">\n\t\t\t\t<view class=\"tz_box qrcode_box\">\n\t\t\t\t\t<view class=\"close_box\" @click=\"share_qrcode_flag = false\"><u-icon name=\"close\" color=\"#ffffff\"></u-icon></view>\n\t\t\t\t\t<view class=\"share_qrcode\">\n\t\t\t\t\t\t<canvas canvas-id=\"myCanvas\" style=\"width: 690px;height:1040px; position: fixed;top: -10000px;\"></canvas>\n\t\t\t\t\t\t<image @longpress=\"showSaveImgWin = true\" style=\"width: 100%; height: 100%;\" :src=\"canvasToTempFilePath\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</u-mask>\n\n\t\t<u-modal\n\t\t\tv-model=\"showSaveImgWin\"\n\t\t\tcontent=\"确定要保存图片吗\"\n\t\t\t@confirm=\"saveShareImg(canvasToTempFilePath)\"\n\t\t\t@cancel=\"showSaveImgWin = false\"\n\t\t\t:show-cancel-button=\"true\"\n\t\t></u-modal>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tname: 'XQGeneratePoster',\n\tdata() {\n\t\treturn {\n\t\t\tratio: 1,\n\t\t\tctx: null, // 创建canvas对象\n\t\t\tcanvasToTempFilePath: null, // 保存最终生成的导出的图片地址\n\t\t\topenStatus: true, // 声明一个全局变量判断是否授权保存到相册\n\t\t\tshare_qrcode_flag: false,\n\t\t\tshowSaveImgWin: false //保存图片到相册\n\t\t};\n\t},\n\n\tmethods: {\n\t\tshare_qrcode(option) {\n\t\t\tif (option) {\n\t\t\t\tif (!this.canvasToTempFilePath) {\n\t\t\t\t\tthis.createCanvasImage(option);\n\t\t\t\t}\n\t\t\t\tthis.share_qrcode_flag = true;\n\t\t\t}\n\t\t},\n\n\t\t//获取图片信息\n\t\tdownloadFileImg(url) {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tuni.getImageInfo({\n\t\t\t\t\tsrc: url,\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\tresolve(res.path);\n\t\t\t\t\t},\n\t\t\t\t\tfail: err => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '网络错误请重试',\n\t\t\t\t\t\t\ticon: 'loading'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t// 生成海报\n\t\tasync createCanvasImage(option) {\n\t\t\t// 点击生成海报数据埋点\n\t\t\tif (!this.ctx) {\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '生成中...'\n\t\t\t\t});\n\t\t\t\tlet code = this.downloadFileImg(option.codeUrl);\n\t\t\t\tlet cover = this.downloadFileImg(option.coverUrl);\n\t\t\t\tlet headImg = this.downloadFileImg(option.headUrl);\n\t\t\t\tlet bgUrl = '';\n\t\t\t\tif (option.bgUrl) {\n\t\t\t\t\tbgUrl = new Promise(resolve => {\n\t\t\t\t\t\tuni.downloadFile({\n\t\t\t\t\t\t\t//生成临时地址\n\t\t\t\t\t\t\turl: option.bgUrl,\n\t\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\t\tresolve(res.tempFilePath);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: erros => {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '网络错误请重试',\n\t\t\t\t\t\t\t\t\ticon: 'loading'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tPromise.all([headImg, code, cover, bgUrl]).then(result => {\n\t\t\t\t\tconst ctx = uni.createCanvasContext('myCanvas', this);\n\t\t\t\t\tlet canvasWidthPx = 640 * this.ratio,\n\t\t\t\t\t\tcanvasHeightPx = 1040 * this.ratio,\n\t\t\t\t\t\tavatarurl_width = 120, //绘制的头像宽度\n\t\t\t\t\t\tavatarurl_heigth = 120, //绘制的头像高度\n\t\t\t\t\t\tavatarurl_x = 40, //绘制的头像在画布上的位置\n\t\t\t\t\t\tavatarurl_y = 28, //绘制的头像在画布上的位置\n\t\t\t\t\t\tcodeurl_width = 180, //绘制的二维码宽度\n\t\t\t\t\t\tcodeurl_heigth = 180, //绘制的二维码高度\n\t\t\t\t\t\tcodeurl_x = 70, //绘制的二维码在画布上的位置\n\t\t\t\t\t\tcodeurl_y = 800, //绘制的二维码在画布上的位置\n\t\t\t\t\t\tcoverurl_width = 610, //绘制的封面宽度\n\t\t\t\t\t\tcoverurl_heigth = 350, //绘制的封面高度\n\t\t\t\t\t\tcoverurl_x = 40, //绘制的封面在画布上的位置\n\t\t\t\t\t\tcoverurl_y = 190; //绘制的封面在画布上的位置\n\n\t\t\t\t\tif (option.bgUrl) {\n\t\t\t\t\t\tctx.drawImage(result[3], 0, 0, 690, 1040); // 背景图片需要本地\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//绘制圆角矩形\n\t\t\t\t\t\tctx.save();\n\t\t\t\t\t\tctx.translate(0, 0);\n\t\t\t\t\t\t//绘制圆角矩形的各个边\n\t\t\t\t\t\tthis.drawRoundRectPath(ctx, 690, 1040, 14);\n\t\t\t\t\t\tctx.fillStyle = option.fillStyle || '#0688ff'; //若是给定了值就用给定的值否则给予默认值\n\t\t\t\t\t\tctx.fill();\n\t\t\t\t\t\tctx.restore();\n\t\t\t\t\t}\n\n\t\t\t\t\t// 白底\n\t\t\t\t\tctx.setFillStyle('#ffffff');\n\t\t\t\t\tctx.fillRect(25, 175, 640, 840);\n\n\t\t\t\t\tctx.save(); // 先保存状态 已便于画完圆再用\n\t\t\t\t\tctx.beginPath(); //开始绘制\n\t\t\t\t\t//先画个圆   前两个参数确定了圆心 （x,y） 坐标  第三个参数是圆的半径  四参数是绘图方向  默认是false，即顺时针\n\t\t\t\t\tctx.arc(avatarurl_width / 2 + avatarurl_x, avatarurl_heigth / 2 + avatarurl_y, avatarurl_width / 2, 0, Math.PI * 2, false);\n\t\t\t\t\tctx.clip(); //画了圆 再剪切  原始画布中剪切任意形状和尺寸。一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内\n\t\t\t\t\tctx.drawImage(result[0], avatarurl_x, avatarurl_y, avatarurl_width, avatarurl_heigth); // 推进去图片\n\n\t\t\t\t\tctx.restore(); //恢复之前保存的绘图上下文状态 可以继续绘制\n\n\t\t\t\t\tctx.font = 'normal bold 45px sans-serif';\n\t\t\t\t\tctx.setFillStyle('#ffffff'); // 文字颜色\n\t\t\t\t\tif (option.nickName) {\n\t\t\t\t\t\tthis.dealWords({\n\t\t\t\t\t\t\tctx: ctx, //画布上下文\n\t\t\t\t\t\t\tfontSize: 45, //字体大小\n\t\t\t\t\t\t\tword: option.nickName, //需要处理的文字\n\t\t\t\t\t\t\tmaxWidth: 480, //一行文字最大宽度\n\t\t\t\t\t\t\tx: 190, //文字在x轴要显示的位置\n\t\t\t\t\t\t\ty: 40, //文字在y轴要显示的位置\n\t\t\t\t\t\t\tmaxLine: 1 //文字最多显示的行数\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tctx.setFillStyle('#ffffff'); // 文字颜色\n\t\t\t\t\tctx.setFontSize(30); // 文字字号\n\t\t\t\t\tctx.fillText(option.miniName, 190, 130); // 绘制文字\n\n\t\t\t\t\tctx.setFillStyle('#222222');\n\t\t\t\t\tif (option.tkName) {\n\t\t\t\t\t\tthis.dealWords({\n\t\t\t\t\t\t\tctx: ctx, //画布上下文\n\t\t\t\t\t\t\tfontSize: 32, //字体大小\n\t\t\t\t\t\t\tword: option.tkName, //需要处理的文字\n\t\t\t\t\t\t\tmaxWidth: 610, //一行文字最大宽度\n\t\t\t\t\t\t\tx: 40, //文字在x轴要显示的位置\n\t\t\t\t\t\t\ty: 550, //文字在y轴要显示的位置\n\t\t\t\t\t\t\tmaxLine: 2 //文字最多显示的行数\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tctx.font = 'normal normal 26px sans-serif';\n\t\t\t\t\tctx.setFillStyle('#555555'); // 文字颜色\n\t\t\t\t\tctx.fillText('题库作者：', 40, 670); // 绘制文字\n\n\t\t\t\t\tctx.font = 'normal normal 26px sans-serif';\n\t\t\t\t\tctx.setFillStyle('#555555'); // 文字颜色\n\t\t\t\t\tif (option.tkAuthor) {\n\t\t\t\t\t\tthis.dealWords({\n\t\t\t\t\t\t\tctx: ctx, //画布上下文\n\t\t\t\t\t\t\tfontSize: 26, //字体大小\n\t\t\t\t\t\t\tword: option.tkAuthor, //需要处理的文字\n\t\t\t\t\t\t\tmaxWidth: 490, //一行文字最大宽度\n\t\t\t\t\t\t\tx: 170, //文字在x轴要显示的位置\n\t\t\t\t\t\t\ty: 630, //文字在y轴要显示的位置\n\t\t\t\t\t\t\tmaxLine: 1 //文字最多显示的行数\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// 白底\n\t\t\t\t\tctx.setFillStyle('#CBE6FE');\n\t\t\t\t\tctx.fillRect(40, 690, 125, 40);\n\n\t\t\t\t\tctx.font = 'normal normal 24px sans-serif';\n\t\t\t\t\tctx.setFillStyle('#1F8DFE'); // 文字颜色\n\t\t\t\t\tctx.fillText(option.tkType, 78, 720); // 绘制文字\n\n\t\t\t\t\t// 白底\n\t\t\t\t\tctx.setFillStyle('#FDE5D2');\n\t\t\t\t\tctx.fillRect(180, 690, 125, 40);\n\n\t\t\t\t\tctx.setFillStyle('#F37F26'); // 文字颜色\n\t\t\t\t\tctx.fillText(option.cost, 218, 720); // 绘制文字\n\n\t\t\t\t\t// 白底\n\t\t\t\t\tctx.setFillStyle('#D2F1EF');\n\t\t\t\t\tctx.fillRect(320, 690, 125, 40);\n\n\t\t\t\t\tctx.setFillStyle('#2EBBB4'); // 文字颜色\n\t\t\t\t\tctx.fillText(option.isPub, 360, 720); // 绘制文字\n\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\t// 设置线宽\n\t\t\t\t\tctx.lineWidth = 1;\n\t\t\t\t\t// 设置间距（参数为无限数组，虚线的样式会随数组循环）\n\t\t\t\t\tctx.setLineDash([10, 10]);\n\t\t\t\t\t// 移动画笔至坐标 x20 y20 的位置\n\t\t\t\t\tctx.moveTo(30, 760);\n\t\t\t\t\t// 绘制到坐标 x20 y100 的位置\n\t\t\t\t\tctx.lineTo(660, 760);\n\t\t\t\t\t// 填充颜色\n\t\t\t\t\tctx.strokeStyle = '#aaaaaa';\n\t\t\t\t\t// 开始填充\n\t\t\t\t\tctx.stroke();\n\t\t\t\t\tctx.closePath();\n\n\t\t\t\t\tctx.font = 'normal normal 36px sans-serif';\n\t\t\t\t\tctx.setFillStyle('#E65449'); // 文字颜色\n\t\t\t\t\tctx.fillText('长按识别', 300, 870); // 绘制孩子百分比\n\n\t\t\t\t\tctx.font = 'normal normal 36px sans-serif';\n\t\t\t\t\tctx.setFillStyle('#222222'); // 文字颜色\n\t\t\t\t\tctx.fillText('小程序码', 444, 870); // 绘制孩子百分比\n\n\t\t\t\t\tctx.font = 'normal normal 36px sans-serif';\n\t\t\t\t\tctx.setFillStyle('#222222'); // 文字颜色\n\t\t\t\t\tctx.fillText('查看题库详细信息', 300, 920); // 绘制孩子百分比\n\n\t\t\t\t\tctx.drawImage(result[2], coverurl_x, coverurl_y, coverurl_width, coverurl_heigth); // 绘制封面\n\t\t\t\t\tctx.drawImage(result[1], codeurl_x, codeurl_y, codeurl_width, codeurl_heigth); // 绘制头像\n\t\t\t\t\tctx.draw(false, () => {\n\t\t\t\t\t\t// canvas画布转成图片并返回图片地址\n\t\t\t\t\t\tuni.canvasToTempFilePath(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcanvasId: 'myCanvas',\n\t\t\t\t\t\t\t\twidth: 690,\n\t\t\t\t\t\t\t\theight: 1040,\n\t\t\t\t\t\t\t\tdestWidth: 690,\n\t\t\t\t\t\t\t\tdestHeight: 1040,\n\t\t\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\t\t\tthis.canvasToTempFilePath = res.tempFilePath;\n\t\t\t\t\t\t\t\t\tthis.showShareImg = true;\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '绘制成功'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: err => {\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '绘制失败'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\tuni.hideToast();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tdrawRoundRectPath(cxt, width, height, radius) {\n\t\t\tcxt.beginPath(0);\n\t\t\t//从右下角顺时针绘制，弧度从0到1/2PI\n\t\t\tcxt.arc(width - radius, height - radius, radius, 0, Math.PI / 2);\n\n\t\t\t//矩形下边线\n\t\t\tcxt.lineTo(radius, height);\n\n\t\t\t//左下角圆弧，弧度从1/2PI到PI\n\t\t\tcxt.arc(radius, height - radius, radius, Math.PI / 2, Math.PI);\n\n\t\t\t//矩形左边线\n\t\t\tcxt.lineTo(0, radius);\n\n\t\t\t//左上角圆弧，弧度从PI到3/2PI\n\t\t\tcxt.arc(radius, radius, radius, Math.PI, (Math.PI * 3) / 2);\n\n\t\t\t//上边线\n\t\t\tcxt.lineTo(width - radius, 0);\n\n\t\t\t//右上角圆弧\n\t\t\tcxt.arc(width - radius, radius, radius, (Math.PI * 3) / 2, Math.PI * 2);\n\n\t\t\t//右边线\n\t\t\tcxt.lineTo(width, height - radius);\n\t\t\tcxt.closePath();\n\t\t},\n\t\t//处理文字多出省略号显示\n\t\tdealWords(options) {\n\t\t\toptions.ctx.setFontSize(options.fontSize); //设置字体大小\n\t\t\tlet allRow = Math.ceil(options.ctx.measureText(options.word).width / options.maxWidth); //实际总共能分多少行\n\t\t\tlet count = allRow >= options.maxLine ? options.maxLine : allRow; //实际能分多少行与设置的最大显示行数比，谁小就用谁做循环次数\n\t\t\tlet endPos = 0; //当前字符串的截断点\n\t\t\tfor (let j = 0; j < count; j++) {\n\t\t\t\tlet nowStr = options.word.slice(endPos); //当前剩余的字符串\n\t\t\t\tlet rowWid = 0; //每一行当前宽度\n\t\t\t\tif (options.ctx.measureText(nowStr).width > options.maxWidth) {\n\t\t\t\t\t//如果当前的字符串宽度大于最大宽度，然后开始截取\n\t\t\t\t\tfor (let m = 0; m < nowStr.length; m++) {\n\t\t\t\t\t\trowWid += options.ctx.measureText(nowStr[m]).width; //当前字符串总宽度\n\t\t\t\t\t\tif (rowWid > options.maxWidth) {\n\t\t\t\t\t\t\tif (j === options.maxLine - 1) {\n\t\t\t\t\t\t\t\t//如果是最后一行\n\t\t\t\t\t\t\t\toptions.ctx.fillText(nowStr.slice(0, m - 1) + '...', options.x, options.y + (j + 1) * 40); //(j+1)*18这是每一行的高度\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\toptions.ctx.fillText(nowStr.slice(0, m), options.x, options.y + (j + 1) * 40);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tendPos += m; //下次截断点\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//如果当前的字符串宽度小于最大宽度就直接输出\n\t\t\t\t\toptions.ctx.fillText(nowStr.slice(0), options.x, options.y + (j + 1) * 40);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// 保存到系统相册\n\t\tsaveShareImg(canvasToTempFilePath) {\n\t\t\tuni.saveImageToPhotosAlbum({\n\t\t\t\tfilePath: canvasToTempFilePath,\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tthis.$u.toast('保存成功，快去分享到朋友圈吧~');\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tthis.$u.toast('保存失败~');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n</script>\n\n<style lang=\"scss\">\n.sq_box {\n\tdisplay: flex;\n\theight: 100%;\n\tjustify-content: center;\n\tcolor: #333333;\n\tpadding: 60rpx;\n\t.tz_box {\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 14rpx;\n\t\tpadding: 40rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\ttext-align: center;\n\t\tline-height: 50rpx;\n\t\theight: 80vh;\n\t\t.close_box {\n\t\t\tposition: absolute;\n\t\t\tleft: 50%;\n\t\t\tbottom: -100rpx;\n\t\t\tborder: 4rpx solid #ffffff;\n\t\t\twidth: 60rpx;\n\t\t\theight: 60rpx;\n\t\t\tmargin-left: -30rpx;\n\t\t\tborder-radius: 50%;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t}\n\t\t.share_qrcode {\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t}\n\t\t.tz_title {\n\t\t\tfont-size: 34rpx;\n\t\t\tfont-weight: 600;\n\t\t}\n\n\t\t.content_box {\n\t\t\tmargin: 50rpx 0;\n\t\t\ttext-align: left;\n\t\t\t.inf {\n\t\t\t\tfont-weight: bold;\n\t\t\t\tfont-size: 36rpx;\n\t\t\t\t.copy {\n\t\t\t\t\tfont-weight: 0;\n\t\t\t\t\tcolor: rgb(85, 104, 147);\n\t\t\t\t\tfont-size: 30rpx;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t.qrcode_box {\n\t\tpadding: 0;\n\t}\n}\n</style>\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./XQ-GeneratePoster.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./XQ-GeneratePoster.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1676739005787\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}