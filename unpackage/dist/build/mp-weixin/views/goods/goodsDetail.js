(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["views/goods/goodsDetail"],{"0550":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-swiper/u-swiper")]).then(n.bind(null,"5c79"))},uCountDown:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-count-down/u-count-down")]).then(n.bind(null,"0898"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"abe3"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.goodsInfo.salePrice.toFixed(2));e.$mp.data=Object.assign({},{$root:{g0:n}})},i=[]},"0786":function(e,t,n){"use strict";n.r(t);var o=n("b778"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"1fa8":function(e,t,n){"use strict";(function(e){n("3d3f");o(n("66fd"));var t=o(n("f75a"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},b778:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("a34a")),a=r(n("bd0e")),i=n("b075");function r(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,o,a,i,r){try{var u=e[i](r),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(o,a)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function r(e){u(i,o,a,r,s,"next",e)}function s(e){u(i,o,a,r,s,"throw",e)}r(void 0)}))}}var c={data:function(){return{goodsImg:"https://img02.163.gg/img/96/66/75/966675-ieuskndmvo.jpg!YM0000",canvasImg:"",qrcodeImg:"",content:"canvas万能制作方法，新手简单入手，易学，一天掌握canvas制作。绘制矩形方法、加载图片方法、绘制圆形头像方法、绘制图片cover不变形、文本自定义换行超出省略、绘制圆角按钮等方法。组合起来用，基本海报都能绘制。",textImg:"",change:!1,goodsInfo:[],list:[],timeData:{},time:"",tagList:[{tag:"购买得积分"},{tag:"首单免邮"},{tag:"七天无理由退换"}]}},onReady:function(){this.createQrcode()},onLoad:function(e){this.getDetail(e.goodsId)},methods:{createGoodsPoster:function(){var t=this;return s(o.default.mark((function n(){var i,r,u,s,c,d,f,l,g,h;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.hideDialog(),!t.canvasImg){n.next=3;break}return n.abrupt("return");case 3:return i=t,e.showLoading({title:"海报生成中"}),r=600,u=730,s=400,c=100,d=30,f=" 'PingFang SC',tahoma,arial,'helvetica neue','hiragino sans gb','microsoft yahei',sans-serif",l=e.createCanvasContext("firstCanvas"),a.default.fillRoundRect(l,0,0,r,u,20,"#ffffff"),n.next=15,a.default.getImageInfo(t.goodsImg);case 15:g=n.sent,g.path?(l.save(),l.clip(),a.default.drawImgCover(l,g,0,0,r,s),l.restore(),l.setFillStyle("#ff0036"),l.font="24px"+f,l.fillText("￥",d-5,450),l.font="40px"+f,l.fillText("39.99",50,450),l.font="22px"+f,a.default.drawButton(l,"red",165,418,170,32,16,"会员价￥29.99","#ffffff","center"),l.setFillStyle("#666666"),l.textAlign="left",h={font:"normal 26px"+f,ctx:l,word:i.content,maxWidth:540,maxLine:2,x:d,y:450,l_h:40},a.default.dealWords(h),a.default.drawCircular(l,g.path,d,s+d+160,c,c),l.setFillStyle("#000000"),l.font="bold 26px"+f,l.fillText("创作者：Aa.小凡",c+d+10,s+d+195),l.setFillStyle("#999999"),l.font="normal 22px"+f,l.fillText("所有方法融合一起实战",c+d+10,s+d+235),l.drawImage(i.qrcodeImg,r-d-150,s+d+80+50,150,150),l.draw(!1,(function(){e.canvasToTempFilePath({width:r,height:u,canvasId:"firstCanvas",success:function(t){e.hideLoading(),i.canvasImg=t.tempFilePath}},i)}),500)):(e.hideLoading(),e.showToast({title:"海报制作失败",icon:"none"}));case 17:case"end":return n.stop()}}),n)})))()},onSaveImg:function(){var e=this;return s(o.default.mark((function t(){var n;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n="",!e.canvasImg){t.next=6;break}return t.next=4,e.canvasImg;case 4:n=t.sent,(0,i.saveImg)(n);case 6:case"end":return t.stop()}}),t)})))()},onExitImg:function(){this.canvasImg=""},createQrcode:function(){var t=this;(0,i.qrcodeCanvas)("qrcode","https://www.baidu.com",600,600);var n=e.createCanvasContext("qrcode");n.draw(!0,(function(){e.canvasToTempFilePath({width:600,height:600,canvasId:"qrcode",success:function(e){t.qrcodeImg=e.tempFilePath,console.log(e,"createQrcode")}},t)}))},showDialog:function(){this.$refs.share.open()},hideDialog:function(){this.$refs.share.close()},getDetail:function(t){var n=this;console.log(t),e.request({url:"/api/goodsDetail",data:{goodsId:Number(t)},success:function(e){if(console.log(e.data.goodsDetail),200==e.data.code)for(var t in n.goodsInfo=e.data.goodsDetail,n.time=1e3*n.goodsInfo.expirationTime-Number((new Date).getTime()),e.data.goodsDetail.goodsDetail)n.list.push(e.data.goodsDetail.goodsDetail[t].img)}})},changeIcon:function(){this.change=!this.change,e.$showMsg("".concat(this.change?"收藏成功":"已取消收藏"),"none",2e3)},onChange:function(e){this.timeData=e}}};t.default=c}).call(this,n("543d")["default"])},d7a8:function(e,t,n){},e439:function(e,t,n){"use strict";var o=n("d7a8"),a=n.n(o);a.a},f75a:function(e,t,n){"use strict";n.r(t);var o=n("0550"),a=n("0786");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("e439");var r,u=n("f0c5"),s=Object(u["a"])(a["default"],o["b"],o["c"],!1,null,"339220ee",null,!1,o["a"],r);t["default"]=s.exports}},[["1fa8","common/runtime","common/vendor"]]]);