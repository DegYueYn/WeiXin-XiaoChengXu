require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["views/goods/goodsDetail"],{"0786":function(e,n,o){"use strict";o.r(n);var t=o("b778"),i=o.n(t);for(var s in t)"default"!==s&&function(e){o.d(n,e,(function(){return t[e]}))}(s);n["default"]=i.a},"1fa8":function(e,n,o){"use strict";(function(e){o("3d3f");t(o("66fd"));var n=t(o("f75a"));function t(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(n.default)}).call(this,o("543d")["createPage"])},"20d1":function(e,n,o){"use strict";var t=o("e4d8"),i=o.n(t);i.a},a81b:function(e,n,o){"use strict";o.d(n,"b",(function(){return i})),o.d(n,"c",(function(){return s})),o.d(n,"a",(function(){return t}));var t={uSwiper:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-swiper/u-swiper")]).then(o.bind(null,"5c79"))},uCountDown:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-count-down/u-count-down")]).then(o.bind(null,"0898"))},uniPopup:function(){return o.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(o.bind(null,"abe3"))},uIcon:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(o.bind(null,"ffb0"))},uPopup:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-popup/u-popup")]).then(o.bind(null,"36f0"))},uLine:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-line/u-line")]).then(o.bind(null,"d3cd"))},uCodeInput:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-code-input/u-code-input")]).then(o.bind(null,"bee0"))}},i=function(){var e=this,n=e.$createElement,o=(e._self._c,Number(e.goodsInfo.salePrice).toFixed(2)),t=Number(e.goodsInfo.marketPrice*e.number).toFixed(2),i=Number(e.goodsInfo.salePrice*e.number).toFixed(2),s=Number(e.goodsInfo.salePrice*e.number).toFixed(2),a=Number(e.goodsInfo.salePrice*e.number).toFixed(2);e.$mp.data=Object.assign({},{$root:{g0:o,g1:t,g2:i,g3:s,g4:a}})},s=[]},b778:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=a(o("a34a")),i=a(o("bd0e")),s=o("b075");function a(e){return e&&e.__esModule?e:{default:e}}function r(e,n,o,t,i,s,a){try{var r=e[s](a),u=r.value}catch(d){return void o(d)}r.done?n(u):Promise.resolve(u).then(t,i)}function u(e){return function(){var n=this,o=arguments;return new Promise((function(t,i){var s=e.apply(n,o);function a(e){r(s,t,i,a,u,"next",e)}function u(e){r(s,t,i,a,u,"throw",e)}a(void 0)}))}}var d={data:function(){return{pwd:"",size:"S【建议100斤以内】",Keyheight:"",number:1,show:!1,sizeList:[{title:"S【建议100斤以内】"},{title:"M【建议100-115斤】"},{title:"L【建议115-130斤】"},{title:"XL【建议130-140斤】"},{title:"XXL【建议140-160斤】"}],addressInfo:[],Itemindex:0,Sizeindex:0,goodsImg:"",canvasImg:"",qrcodeImg:"",content:"",textImg:"",change:!1,goodsInfo:[],list:[],timeData:{},time:"",note:"",btnList:[{icon:"/static/goodsDetail/store.png",name:"店铺"},{icon:"/static/goodsDetail/car.png",name:"购物车"}],tagList:[{tag:"购买得积分"},{tag:"首单免邮"},{tag:"七天无理由退换"}]}},onReady:function(){this.createQrcode()},onShow:function(){},onLoad:function(n){this.getDetail(n.goodsId);var o=e.getStorageSync("address");console.log("addressList",o),o.length>0&&o[0].isDefaultAddress&&(this.addressInfo=o[0])},methods:{descNumber:function(){this.number<=1?e.$showMsg("不能再少了","none",2e3):this.number--},PAY:function(){e.$showMsg("暂不支持其他方式支付！","none",2e3)},finish:function(n){var o=this;setTimeout((function(){o.show=!1;var n=e.getStorageSync("orderList");n[n.length-1].type="success",console.log("order",n),e.setStorageSync("orderList",n),e.hideLoading(),e.navigateTo({url:"/views/goods/paySuccess"})}),1e3),e.showLoading({title:"支付中..."})},addNumber:function(){this.number++},toAddress:function(){e.navigateTo({url:"/views/address/address"})},pay:function(){var n=this;if(this.addressInfo.name&&this.addressInfo.phoneNumber&&this.addressInfo.address){var o={goodsName:this.goodsInfo.goodsName,goodsPrice:this.goodsInfo.salePrice*this.number,goodsStore:this.goodsInfo.storeName,address:this.addressInfo.address+this.addressInfo.addArea,name:this.addressInfo.name,size:this.size,time:(new Date).getTime(),remark:this.note,phone:this.addressInfo.phoneNumber};if(e.getStorageSync("orderList")){var t=e.getStorageSync("orderList");t.push(o),e.setStorageSync("orderList",t),console.log("ee",e.getStorageSync("orderList"))}else{var i=[];i.push(o),e.setStorageSync("orderList",i),console.log("ff",e.getStorageSync("orderList"))}console.log(o),setTimeout((function(){n.show=!0,e.hideLoading()}),1e3),e.showLoading({title:"支付中..."})}else e.$showMsg("请完善收货地址信息！","none",2e3)},close:function(){this.show=!1},openselectItem:function(e){"buy"==e&&this.$refs.selectItem.open()},chooseSize:function(e,n){this.Sizeindex=n,this.size=e.title},chooseItem:function(e,n){this.goodsInfo.goodsImg=e,this.Itemindex=n},closeselectItem:function(){this.$refs.selectItem.close()},goWhere:function(n){"店铺"==n.name?e.$showMsg("查看店铺功能开发中...","none",2e3):"客服"==n.name||"购物车"==n.name&&e.$showMsg("去购物车页面","none",2e3)},showDialog:function(){this.$refs.share.open()},hideDialog:function(){this.$refs.share.close()},getDetail:function(n){var o=this;e.request({url:"/api/goodsDetail",data:{goodsId:Number(n)},success:function(e){if(200==e.data.code)for(var n in o.goodsInfo=e.data.goodsDetail,o.goodsImg=o.goodsInfo.goodsImg,o.time=1e3*o.goodsInfo.expirationTime-Number((new Date).getTime()),e.data.goodsDetail.goodsDetail)o.list.push(e.data.goodsDetail.goodsDetail[n].img)}})},changeIcon:function(){this.change=!this.change,e.$showMsg("".concat(this.change?"收藏成功":"已取消收藏"),"none",2e3)},onChange:function(e){this.timeData=e},createGoodsPoster:function(){var n=this;return u(t.default.mark((function o(){var s,a,r,u,d,c,l,f,g,m;return t.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(n.hideDialog(),!n.canvasImg){o.next=3;break}return o.abrupt("return");case 3:return s=n,e.showLoading({title:"海报生成中"}),a=600,r=730,u=400,d=100,c=30,l=" 'PingFang SC',tahoma,arial,'helvetica neue','hiragino sans gb','microsoft yahei',sans-serif",f=e.createCanvasContext("firstCanvas"),i.default.fillRoundRect(f,0,0,a,r,20,"#ffffff"),o.next=15,i.default.getImageInfo(s.goodsImg);case 15:g=o.sent,g.path?(f.save(),f.clip(),i.default.drawImgCover(f,g,0,0,a,u),f.restore(),f.font="22px"+l,i.default.drawButton(f,"red",65,418,170,52,16,"会员价:".concat(n.goodsInfo.salePrice),"#ffffff","center"),f.setFillStyle("#666666"),f.textAlign="left",m={font:"normal 26px"+l,ctx:f,word:s.goodsInfo.goodsName,maxWidth:540,maxLine:2,x:c,y:450,l_h:40},i.default.dealWords(m),i.default.drawCircular(f,g.path,c,u+c+160,d,d),f.setFillStyle("#000000"),f.font="bold 26px"+l,f.fillText("".concat(e.getStorageSync("nickname")," 为您推荐"),d+c+10,u+c+195),f.setFillStyle("#999999"),f.font="normal 22px"+l,f.fillText("快来和我一起看看吧！",d+c+10,u+c+235),f.drawImage(s.qrcodeImg,a-c-150,u+c+80+50,150,150),f.draw(!1,(function(){e.canvasToTempFilePath({width:a,height:r,canvasId:"firstCanvas",success:function(n){e.hideLoading(),s.canvasImg=n.tempFilePath}},s)}),500)):(e.hideLoading(),e.showToast({title:"海报制作失败",icon:"none"}));case 17:case"end":return o.stop()}}),o)})))()},onSaveImg:function(){var e=this;return u(t.default.mark((function n(){var o;return t.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o="",!e.canvasImg){n.next=6;break}return n.next=4,e.canvasImg;case 4:o=n.sent,(0,s.saveImg)(o);case 6:case"end":return n.stop()}}),n)})))()},onExitImg:function(){this.canvasImg=""},createQrcode:function(){var n=this;(0,s.qrcodeCanvas)("qrcode","https://www.baidu.com",600,600);var o=e.createCanvasContext("qrcode");o.draw(!0,(function(){e.canvasToTempFilePath({width:600,height:600,canvasId:"qrcode",success:function(e){n.qrcodeImg=e.tempFilePath}},n)}))}}};n.default=d}).call(this,o("543d")["default"])},e4d8:function(e,n,o){},f75a:function(e,n,o){"use strict";o.r(n);var t=o("a81b"),i=o("0786");for(var s in i)"default"!==s&&function(e){o.d(n,e,(function(){return i[e]}))}(s);o("20d1");var a,r=o("f0c5"),u=Object(r["a"])(i["default"],t["b"],t["c"],!1,null,"07c02914",null,!1,t["a"],a);n["default"]=u.exports}},[["1fa8","common/runtime","common/vendor","views/goods/common/vendor"]]]);