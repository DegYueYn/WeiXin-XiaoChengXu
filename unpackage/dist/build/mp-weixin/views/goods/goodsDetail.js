require('./common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["views/goods/goodsDetail"],{"0786":function(e,n,t){"use strict";t.r(n);var o=t("b778"),a=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(n,e,(function(){return o[e]}))}(i);n["default"]=a.a},"1fa8":function(e,n,t){"use strict";(function(e){t("3d3f");o(t("66fd"));var n=o(t("f75a"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t("543d")["createPage"])},"459fa":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){return o}));var o={uSwiper:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-swiper/u-swiper")]).then(t.bind(null,"5c79"))},uCountDown:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-count-down/u-count-down")]).then(t.bind(null,"0898"))},uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"abe3"))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"ffb0"))}},a=function(){var e=this,n=e.$createElement,t=(e._self._c,Number(e.goodsInfo.salePrice).toFixed(2));e.$mp.data=Object.assign({},{$root:{g0:t}})},i=[]},"4e19":function(e,n,t){"use strict";var o=t("fac5"),a=t.n(o);a.a},b778:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=s(t("a34a")),a=s(t("bd0e")),i=t("b075");function s(e){return e&&e.__esModule?e:{default:e}}function c(e,n,t,o,a,i,s){try{var c=e[i](s),r=c.value}catch(u){return void t(u)}c.done?n(r):Promise.resolve(r).then(o,a)}function r(e){return function(){var n=this,t=arguments;return new Promise((function(o,a){var i=e.apply(n,t);function s(e){c(i,o,a,s,r,"next",e)}function r(e){c(i,o,a,s,r,"throw",e)}s(void 0)}))}}var u={data:function(){return{number:1,sizeList:[{title:"S【建议100斤以内】"},{title:"M【建议100-115斤】"},{title:"L【建议115-130斤】"},{title:"XL【建议130-140斤】"},{title:"XXL【建议140-160斤】"}],Itemindex:0,Sizeindex:0,goodsImg:"",canvasImg:"",qrcodeImg:"",content:"",textImg:"",change:!1,goodsInfo:[],list:[],timeData:{},time:"",btnList:[{icon:"/static/goodsDetail/store.png",name:"店铺"},{icon:"/static/goodsDetail/car.png",name:"购物车"}],tagList:[{tag:"购买得积分"},{tag:"首单免邮"},{tag:"七天无理由退换"}]}},onReady:function(){this.createQrcode()},onLoad:function(e){this.getDetail(e.goodsId)},methods:{descNumber:function(){this.number<=1?e.$showMsg("不能再少了","none",2e3):this.number--},addNumber:function(){this.number++},openselectItem:function(e){"buy"==e&&this.$refs.selectItem.open()},chooseSize:function(e,n){this.Sizeindex=n,console.log("尺寸",e.title)},chooseItem:function(e,n){console.log("分类",e),this.goodsInfo.goodsImg=e,this.Itemindex=n},closeselectItem:function(){this.$refs.selectItem.close()},goWhere:function(n){console.log(n),"店铺"==n.name?e.$showMsg("查看店铺功能开发中...","none",2e3):"客服"==n.name||"购物车"==n.name&&e.$showMsg("去购物车页面","none",2e3)},showDialog:function(){this.$refs.share.open()},hideDialog:function(){this.$refs.share.close()},getDetail:function(n){var t=this;e.request({url:"/api/goodsDetail",data:{goodsId:Number(n)},success:function(e){if(console.log(e.data.goodsDetail),200==e.data.code){for(var n in t.goodsInfo=e.data.goodsDetail,t.goodsImg=t.goodsInfo.goodsImg,t.time=1e3*t.goodsInfo.expirationTime-Number((new Date).getTime()),e.data.goodsDetail.goodsDetail)t.list.push(e.data.goodsDetail.goodsDetail[n].img);console.log(t.list)}}})},changeIcon:function(){this.change=!this.change,e.$showMsg("".concat(this.change?"收藏成功":"已取消收藏"),"none",2e3)},onChange:function(e){this.timeData=e},createGoodsPoster:function(){var n=this;return r(o.default.mark((function t(){var i,s,c,r,u,d,l,f,g,m;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.hideDialog(),!n.canvasImg){t.next=3;break}return t.abrupt("return");case 3:return i=n,e.showLoading({title:"海报生成中"}),s=600,c=730,r=400,u=100,d=30,l=" 'PingFang SC',tahoma,arial,'helvetica neue','hiragino sans gb','microsoft yahei',sans-serif",f=e.createCanvasContext("firstCanvas"),a.default.fillRoundRect(f,0,0,s,c,20,"#ffffff"),t.next=15,a.default.getImageInfo(i.goodsImg);case 15:g=t.sent,g.path?(f.save(),f.clip(),a.default.drawImgCover(f,g,0,0,s,r),f.restore(),f.font="22px"+l,a.default.drawButton(f,"red",65,418,170,52,16,"会员价:".concat(n.goodsInfo.salePrice),"#ffffff","center"),f.setFillStyle("#666666"),f.textAlign="left",m={font:"normal 26px"+l,ctx:f,word:i.goodsInfo.goodsName,maxWidth:540,maxLine:2,x:d,y:450,l_h:40},a.default.dealWords(m),a.default.drawCircular(f,g.path,d,r+d+160,u,u),f.setFillStyle("#000000"),f.font="bold 26px"+l,f.fillText("".concat(e.getStorageSync("nickname")," 为您推荐"),u+d+10,r+d+195),f.setFillStyle("#999999"),f.font="normal 22px"+l,f.fillText("快来和我一起看看吧！",u+d+10,r+d+235),f.drawImage(i.qrcodeImg,s-d-150,r+d+80+50,150,150),f.draw(!1,(function(){e.canvasToTempFilePath({width:s,height:c,canvasId:"firstCanvas",success:function(n){e.hideLoading(),i.canvasImg=n.tempFilePath}},i)}),500)):(e.hideLoading(),e.showToast({title:"海报制作失败",icon:"none"}));case 17:case"end":return t.stop()}}),t)})))()},onSaveImg:function(){var e=this;return r(o.default.mark((function n(){var t;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t="",!e.canvasImg){n.next=6;break}return n.next=4,e.canvasImg;case 4:t=n.sent,(0,i.saveImg)(t);case 6:case"end":return n.stop()}}),n)})))()},onExitImg:function(){this.canvasImg=""},createQrcode:function(){var n=this;(0,i.qrcodeCanvas)("qrcode","https://www.baidu.com",600,600);var t=e.createCanvasContext("qrcode");t.draw(!0,(function(){e.canvasToTempFilePath({width:600,height:600,canvasId:"qrcode",success:function(e){n.qrcodeImg=e.tempFilePath}},n)}))}}};n.default=u}).call(this,t("543d")["default"])},f75a:function(e,n,t){"use strict";t.r(n);var o=t("459fa"),a=t("0786");for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);t("4e19");var s,c=t("f0c5"),r=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"52132730",null,!1,o["a"],s);n["default"]=r.exports},fac5:function(e,n,t){}},[["1fa8","common/runtime","common/vendor","views/goods/common/vendor"]]]);